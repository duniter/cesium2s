fragment Cert on Cert {
  __typename
  id
  expireOn
  createdOn
  receiver {
    ...LightIdentity
  }
  issuer {
    ...LightIdentity
  }
}

query CertsConnectionByIssuer($address: String!, $first: Int!, $orderBy: [CertOrderBy!]!, $after: String) {
  certConnection(first: $first, after: $after, orderBy: $orderBy, where: { issuer: { account: { id: { _eq: $address } } } }) {
    pageInfo {
      endCursor
      hasNextPage
    }
    edges {
      node {
        ...Cert
        identity: receiver {
          ...LightIdentity
        }
      }
    }
  }
}

query CertsConnectionByReceiver($address: String!, $first: Int!, $orderBy: [CertOrderBy!]!, $after: String) {
  certConnection(first: $first, after: $after, orderBy: $orderBy, where: { receiver: { account: { id: { _eq: $address } } } }) {
    pageInfo {
      endCursor
      hasNextPage
    }
    edges {
      node {
        ...Cert
        identity: issuer {
          ...LightIdentity
        }
      }
    }
  }
}
